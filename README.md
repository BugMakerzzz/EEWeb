# README

### 1. 实验环境

+ python=3.6

+ allennlp=0.9.0 

+ torch=1.4.0
+ Flask=2.0.1

### 2. 运行方法

在根目录执行以下命令即可在本地运行网页

```python
python test.py
```

### 3. 目录文件简介

+ chinese_roberta_wwm_ext

  存放中文bert预训练模型

+ data

  存放数据集

+ save

  存放模型训练的参数以及输出文件

+ static

  存放前端渲染所用的文件

+ templates

  存放前端html文件

+ test.py

  后端文件

+ 根目录下的其他python文件

  PLMEE模型进行预测时所需文件

### 4. 网页扩展方法

网页左侧留有模型和数据集介绍的链接接口，可以在./templates/index.html文件中的63行处进行补充跳转链接

### 5. 模型以及语言扩展方法

+ 前端扩展

  ![](https://i.bmp.ovh/imgs/2021/08/c2b4d15e33c1cd3b.png)

  index.html关键代码如图所示，若要增加模型，则可以在140后加如下代码：

  ```html
  <option class="dropdown-item" >MODEL_NAME</option>
  ```

+ 后端扩展

  前端实现完毕后，可以在后端test.py文件中的home函数中由**request.form['model']**获取模型的名称。获取名称后，在**predict函数**中进行由输入到模型输出的预测函数补充。这里对预测函数的输入输出的接口作出以下限制：

  + 输入接口

    输入为**id + text**的**Json**格式，示例如下：

    ```python
    {"text": "美军阿帕奇武装直升机", "id": "a5646862686f2f3270de784e8e655244"}
    ```

  + 输出也为**Json**格式，示例如下：

    ```python
    [{'event_type': '财经/交易-降息', 'arguments': [{'role': '降息机构', 'argument': '美联储'}]}]
    ```

  请严格按照输入输出示例的格式来实现对应函数的输入输出接口，否则会报错

### 6. 注意事项 

+ 由于搭建本网页时技术水平有限，并未考虑错误处理。所以对于语言和输入语言不对应等错误情况可能会发生错误，请尽量按照正确的情况进行前端输入，谢谢理解。
+ 若发生没有输出的错误，则可能是因为没有选择模型或者语言。
+ 在选择一项模型或语言后，更改选择前需要手动删去原来的输入。
+ 由于git上传时无法传输过大文件，需要完整模型参数等文件请联系下面的邮箱
+ 有任何bug或者问题欢迎反馈，email: duanjian56@126.com; 1641412838@qq.com 



